plugins {
    id 'java'
    id 'application'
}

repositories {
    mavenCentral()
}

dependencies {
    testImplementation 'org.junit.jupiter:junit-jupiter:5.7.0'
    testImplementation 'org.hamcrest:hamcrest-library:2.2'
    implementation 'com.opencsv:opencsv:5.5.2'
}

test {
    ignoreFailures = true
    useJUnitPlatform()
}

mainClassName = 'edu.odu.cs.Semester'
application {
    mainClass = 'edu.odu.cs.Semester'
}

java {
	sourceCompatibility = JavaVersion.toVersion(11)
	targetCompatibility = JavaVersion.toVersion(11)
}

task Reports (type: Copy) {
    from(file('src/main/html/'))
    into(file('build/reports'))
}

task deployReports (dependsOn: 'Reports') {
	group = "Reporting"
    description 'Copies reports to the website repo and pushes to Github'
    doLast {	  
		def pagesDir = "$buildDir/gh-pages"
		exec {
			workingDir = 'build/gh-pages'
			commandLine = ['git', 'add', '.']
		}
		exec {
			workingDir = 'build/gh-pages'
			commandLine = ['git', 'commit', '-m', 'Updating-webpages']
		}
		exec {
			workingDir = 'build/gh-pages'
			commandLine = ['git', 'push']
		}
	}
}